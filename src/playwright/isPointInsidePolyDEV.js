const { chromium, devices } = require('playwright');

var input = JSON.parse(process.argv[2]);

//input.proxy = '95.211.175.167:13200';
//input.url = 'https://www.zillow.com/search/GetSearchPageState.htm?searchQueryState=%7B%22pagination%22%3A%7B%7D%2C%22usersSearchTerm%22%3A%22%22%2C%22mapBounds%22%3A%7B%22west%22%3A%22-118.08885532577928%22%2C%22east%22%3A%22-118.07458597382005%22%2C%22south%22%3A%2233.881615385287716%22%2C%22north%22%3A%2233.89052190572857%22%7D%2C%22isMapVisible%22%3Atrue%2C%22filterState%22%3A%7B%22sortSelection%22%3A%7B%22value%22%3A%22days%22%7D%2C%22isAllHomes%22%3A%7B%22value%22%3Atrue%7D%7D%2C%22isListVisible%22%3Atrue%2C%22mapZoom%22%3A18%7D&wants=%7B%22cat1%22%3A%5B%22mapResults%22%5D%7D&requestId=2';

var url = 'https://wvgu.org/playwright/gmaps.html';


input.lat = "43.687549614767";
input.lng = "-70.260045100594";
input.geo = ["cqviG~`akL~In[hT`Ilo@ts@uJZoDjQrSqDrWjWbNeHI_JlD`GoCtIvVz`@gHdRhX`_@aYbCsRvYaZeL}PuVw^{oAuUqVvGiPwH|@ik@gg@sC_MpQkGbKqW","cq}eGpcynLlKbS{BzT}HDkAqJvBs]","crziGlekkLtXjZhLVhPf]iPwAGsMaa@wTuCgR","cwoiG`unkL`[zf@@jNq\\b@_Yae@y@sGhYw@|A}F","esljGhloiLv[jS}CdEtR|H`@|Hwo@mFep@cV``@iMrIzHtHmJ","e~|eGj_tnLlIva@jStMh@~b@mHxJc_@gGfLlKsGx]iDsPlAtd@ySo`@cDw_@tKkTx@gg@bRmW","gqnjG~~ejLxm@be@pf@bv@xCfR{EqAIbIwm@ao@z\\`q@CrIuLiBeArLw_@mb@sFrJdBsPaUsWxFoGmF~C_T_i@`GcIvUjIaAu^","keugG`zzlLdE\\jCjCXdFiD[}ArAqDyFlAmE","mokiGb_lkL~g@dn@~]rw@m^mBuFxWaRaRu@hFcPkIcDeVlGlBtCwGoDyKrHsN{LkYvEwR","mrajG~myjLvd@vPxWwD`NjTh_Bf_At^kT`KtEpGdM_LtCdDxa@pMr@rB}OnUnBpCzUzUlFf[vo@uSwAmEuN{MjI_YcMyGdSnLzX}AzWePv`@MkTk_@pHyI_TkSgDgU}Zqn@kX}LjFuEc[cL{C`BsZuL{QzI{l@qTfB{BeOgW_KkMas@","qvniGziikLxy@x`@?xiAfD`FbFmGlAhGyFp@kEx_@eNcIyl@fEaEqSud@mXqCkOaTmN_@q]~o@tAfB}QtRmT","qybjG`l}jLlShe@fUzGr\\hhA_Y`FuU}\\oEdFmMaOuEqUfK`TrD{DcLu\\Wur@","sftiGtbskLbLpDlJdb@wNxTaHcG{J~H~JeMwJkVzJ{Y","uhnjG|gpiLxgArWyElJbN~BvuAgPjN~WhXbCzOeOhUhIfMwC|i@bWrSnn@{DzBar@aE_IkNrDaDo[uJnCfG}UdAg_@~g@cd@cBpc@p`@|T~E{PjSuQsNeAlGyNUtR~Zkg@eC_k@y`@vH_^~Hh@gIkHpPuAyUcJzTcAgUuDtCgHyHy@uEpJaYaEuBeErO}FvB}L_WdQwHoAyAlKma@iJxBfPub@uB`U~Jm@|Ium@eBpCfIjh@vCnHfIjAjOgQLQzHkGaJeCnHyLUhi@`Mmj@k@}MkLgMhFxNdKd]@|i@rOlA~LlLmLh{Cf`Aq@lEqZ{DnA|G}Qv@bElD{HxDga@iXfAnHsGZx~@r\\|M\\_EwKfo@fPxFiMyZeSvs@bMhG`OhLgChh@zTb@xMp]~NtAjU~LfLwF|E}iBe[_EqKcQ~Ekc@oLnH`XeeAkUdE~Kfh@rWus@gX_KuNeTfBoCzT{n@w`@ff@dl@gJ~AWxPyKpFik@}j@?bJ_SoPyS?iVwLyGkWgf@uRba@YfSaK|]fEuBxEhDoEp|@xDnXuJxq@fDmDqFgh@wKy}AkGe^{LfVAmRgHyOrC~ArFuv@yFe`@uOzIwEgl@_LsUwRxXv@rMpK~DyFd[rEdChJjJcH`c@|BqcAsPwCkMav@mGbZqI}UeJyFy`@hK{NmC_I`c@cH}d@oHrV_EiAgL`LwKq^aBvJwThVwNnUzBtThT~Vn@hLxLkAcZuPcTfhBvQaDmD|SiFuF}G","ui|eG~`tnLhCrEo@hDyCnEiCU@sOfEc@","unejGniuiLhWp_@mSjA[xa@e[uMjHlP{FK_PwKkBsWiFzAoJkVbPxGLiStY~GrQwJ","updjGlq~jL|OfUwM`YzBhSfRlL`IiIfz@tYzCuFvKzc@bLw@sHqJt_@zIkAh\\fX|g@}QuFgHpRfBl[miAc}AaKdMsz@{@tKm]}OmPlFq_@mZkc@zDqGzPlLhFqIaFm^","uwsjGntlhL||@pNzDdPnSuI{DzGzMdBr@lIa^jSmn@nH{F{GhIkGsLaEpCmVyLuZ","wjfjGxtohLpA~@~@vDy@nAkCMuB`@R}CtC}D","ybviGf{wjLrp@tn@wO_Fe@~\\mS`A{ErMr_B~zAaAxMeH_BxCjG}pCodCcHi_@jv@~e@jV{l@gQ{Y","yfjjGntsjLnLpAd_@`n@yGj^ke@mg@iIcWxJmO","ywhjGxf|iLfoC`|@v@~Jh`@zR?`LprAhz@xWpdBbk@lMoKuR|KwF~pAnp@tUkLxPdN\\bb@nE}PfF|@|OzYF~`@gZkZsLdBkBbJi]aNeWkThCyH{NvE_i@oTuHyMsIxCg^cJ_DkHdRvFK}KcPsLusAmi@kd@mg@yd@}@~I_k@iKoHub@tGq[}KhGyPmc@wSmHmTdMoAy^}QnLwEz~A|~@~IxBbAeMixBssA","{`rkGphlhLpe@jOn\\v]naAjWdwA`r@rd@zFnN_L`WpRjrBvCnb@lLzIaCra@gjBf}@`q@ls@`xA`aBbxAdf@mi@z`Aum@nr@hEls@{a@ji@gKzNqg@vg@JnOdItBwGhXfB{MgLn@uJj\\}TxVLfK{OhvAjp@~W[X~G{TjOsOuEaInFnKzGyW}ElDtVzl@kS~\\dHn\\aSr|@iExb@pOvK|QtLaJnj@|eA`N|EjLlh@cR{WsP~AxMZlCdY`b@`Fxo@pl@~HkKjPba@xRzIbBlOwGh@wGwJwi@q@wBoNnOk@{@qFsx@fHwPwNl@pLeIvF`QfHuEnPng@jN{EtK~IhU|JeUzQuB`UzNwA_PrLfAyD`RvQQcPlM}WiEv@jGeImEoZpFtPtFiE`JrPwA~FfJpWuDnEjUmNbMoArTnN~Rlc@_Zx]eBtS|hAle@zWbLjqAfKrKxFdh@rq@fvB~l@yAtPaV{BnSlLcAvIvXlVe[jOn@SxV}WhEkDdP@f`@jKbXgDdW{LeAv@}G_PoLsOdI_[wS}RlUpCbL{TgAqJhF`AxKmFyIei@{Ac]w[eNg@}FgNoPoA_JhCuCjUpAli@~Mr\\mM`Hse@jCoIyOyNdImSiQia@lPoW}Em`@`YgIuDBfK{e@j@oPdRaEuEQ`Oab@vKmi@yJua@ya@lA}^bUeWy\\yd@rLzBbCuM`Ln@|O|YlDk]oJz@yi@}]e@uO{Gp]w_@iLsCnItG|AkMbApO~FfCgKzOtFaPhBpG~OuSjFjKbCPfRfGcHbb@~Lr@pK{b@rb@wVyQlBo`@cTaEcEaMshA{Oe@sZc]fFen@sc@jDdPcGzFnW`J_PlI~e@qAfDnEwLrGzZzk@~@xb@pUvFeBlWyUeHaAyHq\\dZal@tCcMuJgBhFcWuFuAkW_NcHuYmBrBrSeRu@zLam@mCwSuB|MuVcFuWoa@mDbHzQzRcK}Bl@|Fdi@xMmDtUyR`Jmf@sKiUfE}WmrAmIhLyXsEkMxLtSlH`RgG~EtPoNrA`GnFqOlBK`MpYDe@|Ec}@cAtYtHmXpLbOp@jMgM~n@xLhEbP@uOjiAxL|A|MuGbD{hAgD_[aKjUdMcLuAqDtGeHuGgFbGhx@pYtC~UyMxN`_@xTvFqHcKQtCoFnT_IwPLvAsYvq@zPtCpIaOdA|I|Is^lVyCzLeXuFm[~G_a@mH}LwLeP~Fsr@{`AoPrJoi@of@k}@qZpUrNhIzR}M}BnQ~KnZlBvNjWxEoHfm@fZ~HtRuBjNg^gCeRgYdFrWoP{@hAnWrU}Ih]l`@f_@sBj~Ada@yBhLvIxBeFbFs\\cAnZbO{`AoAdBjH|XrKvg@cEvLzHhYkB}EnE~_@rQik@xHh\\zDhYdStHbT~LcBbN~IiPpBfMtQl{@~PeKrDzFrKgLdEnWrRgP|Hix@et@sOxLek@v@sMkJaK|FqBgO~B~P|JaE|GzZbm@nL|IfXwIlCjPvDoGhLfJiH`R`CaPkE`BeG|IbAiOeFfSaMr\\lHjEdN`XpCgc@oE`FrK}K_ETvJpRqCnJpQiKvDrHk@uAnOzHmZrLvSz[tGnHuFeUaDjCsKlKzHhMeFuCoEj~@fWbp@dc@|OyLxo@dc@dQkGhW|W{RxI`ThQsBhGiM}JiGtDuAeVeMaOqNYka@uZwQdGuAbSvKhKfSeCzw@hr@yI|Ck`@oI}EvGeIkFlAhGyIYxIzHmFrCtP^|`@tZxWkH|@qHfQVwBoJzF{DtMjFaEjQdMbF~RiFuBnq@pE`DhAuIbLXfv@zb@tRtUaD|Ul^dOr[dm@lo@_ChDaHcPw`@lDsJoG~K_AwEtFkKxy@`YjTzv@vWpVt@lUrWnHjc@`d@cYiImdAu|@aQpKZbQoe@oYhJha@~v@j_A_FhMlDxW~f@td@{aAiZ}RuP{@fGuLcRaXu@m{@w{@vLwD}LcV}l@cLcPO}@~Fa\\}[}Bqb@}ToUuM~NwOwd@cHnECoH}SJex@yo@mWpCvH}JiGwMaVwHuEiWjIkGcVu^mPgJyh@NaEjFkmAqqA}MuBiGoQyUq@aDgHlI{JmO{I~BaF}z@aLeLcW|S{FcOIGkOyCjM{V|IkRuIdS|WeRz@eJaSrFtKaJXlJtCiBbJrCkFvC`HfP_FrVrn@~[xKvD~HoGzElOtJhA`M_HiAjFbOwG_AlKfXqNgAvK|R{GtAo@~PhP~YyWiIyFzNfGkCle@r_@yApTfYfVtP[pb@ri@qHbN|LhOhGkAtb@tl@gAvG`JlBf[j|@{O{CkOaXaG`HyFiDet@}rAqo@mb@qe@{v@gt@iUeCeLbLeHaE_FcE|Da^qK}IrSoIuHc@s_@sA|XiNdEdT~AhH~^fGgC~Clf@sElH|L{EmCvOvFoBnMfT_GnCpHgB~JxVrAkL|KnPuLfy@oLm@eMjO`^gEtnBflCtMsRjIn]d[xJhHwa@zLv[yIyCiIlXnPzd@hU~HxLbTzEq@G_c@lWpNz`AlwAt@jI_VgZmGpDsHyIgClI_Noa@aJnEXzMeNu@ec@oZxOhy@eG`@lObI`@rKuDjHgNgGwGbHjGh^dd@IjOhOhOvbAle@xY`AzR}JaBsBxFsd@eU{O{^_`@aJoy@kv@kH}CuF~O_Jw@gBwWec@}]hGzR_L_CiHvVzFdPkEsOnHiMvMhH{CtD|OqAd@lOdl@`p@cHjCuKaTaM|AzF~TqZ|GtKzAaBvV`DuVjh@|_@bRmUzKo@xKnh@rVxTjNuK~QzNbOlh@eRw@|H~B{HpJnL}CtKxZ{AhQxHuz@ni@fc@fNaHZsS_Wel@hTbDbVf[`GdLmG`DMdVbPp{@`S|SR~VwPtAuC`z@nF~J|HsHpN~EvHi^xM}K~v@rpAfH`FtAiJrNwC~OnWi@vQvNxN`@xE_KE`AzI|NbIzCaElMfY|GsH|Xbh@kOxIfMpIuGpGcKmBoCuQ_KpF_\\qIi_@tCuAgZuEvUdSlQdGdq@dTdR~Gbc@bNbAnJ}Nl`@nHl`@dWfVgHbDgPzFfDNyM~u@vPxa@rw@pHgAxTn^tEcCnq@n_A}W~Z~OKlBeI|^~BzAyOmM_RdOnDgByGlTrNnEyBcLaWlk@pP~Spi@Qf^gJ~InGpR~s@v`@zMiKmLjM`Hp]}LmDyXpNc]cXsIbW}g@m\\mWvXaL}DkJrHh`@jFr@~b@jKxBzXaLrx@j]~[eJdp@zNeCqQyIYlE_^kGiUlGsBxJ|d@~r@bKoAdbBuGtMzRbZdn@~KlV{h@~DgYyUsd@cp@mYtKa@`Bke@zRyq@~VuPhd@nk@|I_EmEdIdHxJvMaLgIzRdMeBiFjJvHuGiDvRtLcKuDvIjLiAoKfLpTwImAhQtJmEyF`NvGmImDpK~EiIqBjH~CuFAfJ`[bTvUhyBaa@xEk^~_@t\\dU}b@uGfRbRoWrEaC|MjPkIyJte@iVtJsNvw@dMcGvG{[hXqMtGc\\dNcFb@zJrVwa@dMlMaWmXhSd@gBec@jd@a]w@oa@|LgYwSwCaRm`@bKnH~CkGxXb@|@iHaEqi@_MpMwP{Bu@_O{Sf@pAaGwM}I`DgG~F`L~HcT`FpIdTiU}LuW}KvOaTeByHdHfCuNeZuQaFvDjG_HsZuN`HiFmRiYpPmPtKp@}MwIrUvKzCeMuGoM{F|@fHePmMqJnu@`RzUa\\lg@iBfGcPtQyCzCoc@xOn@m@sSvOgOfv@pXbE}ItW`Qx@dSz]aJhn@vUeEsL|EcJr[nMcGuS`OvLsEuNrOoJkQySvObHk@ySbS}D{AoKvQpTdFiHzVhUnEqIlGfGbH}KmBmNdMbDtHsUvN~Fw@aU~XpIQcP~n@z{@hGtw@LbSiQ_GyIbSqG}FaG`DoBbm@|GzWvOfFx`@j}@hNjIiEfcCy[|a@eK}DuSbF`^`A{NnGpEln@pv@ruA~Epd@r[rb@z`Afn@bOuNcA_I`DbJhEcEy@aTdIjCjKdp@gFto@mHeIwDdIiUk]{VtMaTb`@kR_ViPf]eT{HmEnHfOhl@hMlHlJcDtLu`@|QwDyAdu@tTlpAnt@dkA`~B`bB|dAvd@jg@vF`kBeJp{@kY|AiRjQ_BJcHva@qQlb@wdBrJxRqKw@|ElP}JxAuT~lA~NgCfPg[ld@rf@`NiYvMyC{Ykm@sC}ZwO}TgJdHwFmDgEgt@uNcMpVobAdDl]fHnIvL{BpQrWaPtQhCn_@he@biBvs@hu@xe@zAWbWxVt^jWH|EiJkDoQtJu@gDfe@rHbG`NkSfM`SeHfRrCnWtH]hPi\\nX|X{@dYkNg@sBrIx@dYnSlf@tL~}@nl@~m@pMqXtHrE|`@wJbThCd@nQ}LlO`Gf^dRpBwK_QbDcSv\\{CvMhY}Z~KnYxF~HeIzKdHwAjKsMsBG|MeKbHhFvJnx@ik@rSdQ{]fs@pPwBmCgDtOuLrUt]h`@tKrBvl@xUdCrLhj@eOdi@oUv@mIp`@jL`o@zKiEwHhf@pGjm@xUzLySuByCfHpEptBzXzj@hVviA~bB`dBtyAv|@`t@`P|ScHrMfTdd@^pKn^rd@j`@vdAtg@dfBbh@`FtIpLiCfNsc@~S_E`OlMvEqQrEdIvb@al@vU}@z^eb@tc@vY~i@rs@jH|CdF}JrKvR~TwPbS|X`JkOlSr`@jMm@xRtPaLfT{JrAKhNuDoBvD`ZkNdj@vUud@bOsC_L_OxB_MbHdMrNz@|CoQpHv@df@lg@pMqTXcr@jl@{\\tGdYsYjpArV~m@pzB|y@pNiRdNg@AoHzb@tDjHb|A~]RbAkXxGiCbM|FzR}DpOpy@nDm\\pUNdDjVly@hh@`Kz`@hc@|MjSyAxJre@fPn@zHaRnO|c@fi@k@lQtVm@bObH|FxIwD~HlQ|HdUkGfEfE|VhTtTmIzd@{c@rQ{YySog@pK`CzOhLvCYrK_I{DaCzHxHj{@nMlZiGAgDlRsPaAqCrGlOvV{Nv@g@|TmFq@xH`lD{GLl@dLgRpUwUjE@t^oV`rAg^v\\}xAhhCyhAbbCwzBvj@wcAk\\kdA_D_b@_]sjA~\\oP{EeUcp@ei@zGyhAaYyQ|@oTcZkKxEy`@aXeTfRo@n[aYiIg\\zL_Vp~@}CjFcB{J`BdaAo]fCsGzOaO{KuO|ReQ`{@`IdRyEnRsw@|]eEjj@qa@tViGxv@wYrDmHoFwGnSiReJjCrNsNh|@yQpNsXsNjCr{@{JvGsS{T{@cj@wGoAcQn_@c[fEnFv[cPpZgHpF}DwGca@|SaDuOcFzDkNwFyArZqIfABdNqF_EcFtG}AzYcGoGw@rO_EqGcMdj@{b@hNqF}MkDdf@fKbToAlb@~N~i@}GxTwf@lWaPji@y\\aAkEpe@q\\yEw\\r_@eW_R{iBxhAai@uCgPbNkU@uIy\\eW}@m]tXuz@rB_q@{`@aKal@aYy]aLkGab@tAmTun@m\\`Bkm@z_@caBwf@mQtBaYrSJdd@q`@|a@^kVwMuYcH|CmAmG_SpLmTaFeY}VuVQeLk`@iu@sFeFmS_UnL_e@qP{VB_I~Ooi@~EsUl^c[tE{JkJqDaf@|G}Kgr@sFqMiJaSbYok@zLoMrb@_c@zWpD`SuIdOuja@rgA_`Hp\\{Fai@hu@udAsRij@pQmj@cl@qzAfMmi@]us@sa@oa@}^}w@yI_xAs_@ctAiQ{V|W_eAqD_p@|DeGfK~CfAwt@oa@yxA`Eoq@pMwU_Bq`@sTaXWwa@bMnEvF{IoRyO|McXmHyNfSgYsByFkI~HiGoCmAaQwR{UiBkp@a}@mFoy@dg@m@n]kH~Heh@f@cb@aNu]tQeYze@mM_PdC{a@o`@b]kaAqgBpa@uEyv@ewAta@}EuxAagCSzm@wNkAb@z\\osBzPgM}VkZ_H}yA_pCilBbsB{bBwlEnOd`@_x@dD}yJdhJjNruAmzAd\\_UsBxLzr@|BwV|f@|dBukApqB__Aj|BsKxKy`@oAmRbKmJ{C{j@~L}N|]wg@mUzBmTmNaIuk@zBlpBmdFa|JanVaE}K`^sUmfFc}Llc@o_@nYxDhEeV`SmLfJqVdKoq@hVgLcAyIvXeLdMxL~CwDwLuQ|m@vBtVgRvA{LtYfJr]kTwAqFdJPBpJzWzLhh@tn@lZ~S~QhAzP~RtL`A|NcLhF~MfFyGf_@j@vBsN`n@lSvNbQrZmE~TlVtEoPnJk@hGn[|HeIzPjL|DsTjb@sEnH_M|JbC`I}V~c@vBrBgN~KhJdN_f@hDlDjNqNzDkTrOtVzAuPlE_D^nJnGkMkD_HvN@gCeGzKaCxVon@tG|QjP{TrLkl@mu@o{@lwBa{Bc~EqzEjJoVwQyPhaAujClLpFhU{Hdd@a}@jcAmcCgTgUrlCklGgKqUsOjE{MaOyGpC}[_MjgBocEo_IgnHngOw|TrNkRbVnPvbG_~Oo|CkrC`b@cfAetHodHabBxlB_OmDgFcZwPkPwYcAnE_JkFaPzQeFqHc[aIdMe@yTsTtVcMyLaBrIem@~FyJnK{Oga@cHdEqm@sLqMi[cXqKs]zJe|@gIokMy{BdcBo{RbOyc@mUTwl@yVsn@MgyCelA{XiUy[es@i]qX{^{z@f{A_aQ`q@w[jVcDxeBlSbl@t]pw@tNx|@fa@dcApeAze@wDfg@rQne@s[|\\nTdl@y@laB~]nTnVhs@ziBnT~JrxBifU","}wriGrpkkLxLJro@vn@p@nVjJjCuOvGjAlY}x@eAif@{v@yBe[tFqLpc@jTsLgRc@_JnIoA"];

(async () => {	
    const browser = await chromium.launch();
    const context = await browser.newContext(); 
    const page = await context.newPage();
    
    await page.goto(url);

    await page.waitForTimeout(3000);

    var p = '_bg|EfnljQ?sDzAjATbAqBb@';
    var isInside = await page.evaluate((input) => {                    
        if(!input.geo)return;
                
        const lines = input.geo.map(p => google.maps.geometry.encoding.decodePath(p));        
		const point = new google.maps.LatLng(input.lat,input.lng);        
        var isInside = false;
        for (x in lines){
            var geo = new google.maps.Polygon({paths: lines[x]});
            if(google.maps.geometry.poly.containsLocation(point, geo)) isInside = true;
        }			                                
        return isInside;

    },input);
    console.log(isInside);
    await browser.close();
      
    var res = {'isInside': isInside}
    console.log('RES_CONTENT:'+JSON.stringify(res));
})();